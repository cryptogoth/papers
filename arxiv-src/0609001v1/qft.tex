\renewcommand{\arraystretch}{0}
\begin{tabular}{r@{}*{30}{c@{}}l}
\wire{$b_3$} &\sn0&\ti H&\tc{2}&\cn2&\xn2&\cn2&\sm3&\sx0&\sn0&\sn0&\sn0&\sm3&\ti H&\tc{2}&\cn2&\xn2&\cn2&\sm3&\sx0&\sn0&\sn0&\sn0&\sn3&\ti H&\tc{2}&\cn2&\xn2&\cn2&\ti H&\sn0& \wire{$\phi_3(b)$} \\
\wire{$b_2$} &\sn0&\sx0&\dx1&\xn1&\cn1&\xn1&\sm3&\tc{3}&\cn2&\xn2&\cn2&\sm3&\sx0&\dx1&\xn1&\cn1&\xn1&\sm3&\tc{3}&\cn2&\xn2&\cn2&\sn3&\sx0&\dx1&\xn1&\cn1&\xn1&\sx0&\sn0& \wire{$\phi_2(b)$} \\
\wire{$b_1$} &\sn0&\sx0&\sx0&\sn0&\sn0&\sn0&\sm3&\dx1&\xn1&\cn1&\xn1&\sm3&\sx0&\tc{4}&\cn2&\xn2&\cn2&\sm3&\dx1&\xn1&\cn1&\xn1&\sn3&\sx0&\sx0&\sn0&\sn0&\sn0&\sx0&\sn0& \wire{$\phi_1(b)$} \\
\wire{$b_0$} &\sn0&\sx0&\sx0&\sn0&\sn0&\sn0&\sm3&\sx0&\sn0&\sn0&\sn0&\sm3&\sx0&\dx1&\xn1&\cn1&\xn1&\sm3&\sx0&\sn0&\sn0&\sn0&\sn3&\sx0&\sx0&\sn0&\sn0&\sn0&\sx0&\sn0& \wire{$\phi_0(b)$} \\
\end{tabular}
